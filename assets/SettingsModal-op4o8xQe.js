import{c as g,r as a,j as e,A as E,m as o,X as I,b as P,d as R,s as T}from"./index-J6Tnmq39.js";import{Z as _}from"./zap-CwiSqD2n.js";import{U as B}from"./user-BdoEdENw.js";import{C as q}from"./chevron-right-X71Q_0sh.js";const F=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],O=g("bell",F);const z=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],H=g("log-out",z);const U=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],L=g("moon",U),b="lifebalance_notifications";function $(){const[i,l]=a.useState("default"),[r,c]=a.useState({enabled:!1,dailyReminder:!0,reminderTime:"20:00"});a.useEffect(()=>{"Notification"in window&&l(Notification.permission);const s=localStorage.getItem(b);if(s)try{c(JSON.parse(s))}catch(t){console.error("Error parsing notification settings:",t)}},[]);const d=a.useCallback(async()=>{if(!("Notification"in window))return console.log("Notifications not supported"),!1;try{const s=await Notification.requestPermission();return l(s),s==="granted"?(c(t=>{const n={...t,enabled:!0};return localStorage.setItem(b,JSON.stringify(n)),n}),new Notification("LifeBalance",{body:"Super ! Tu recevras des rappels pour noter ton humeur üíú",icon:"/icon-192.png",badge:"/icon-192.png"}),!0):!1}catch(s){return console.error("Error requesting notification permission:",s),!1}},[]),v=a.useCallback(s=>{c(t=>{const n={...t,...s};return localStorage.setItem(b,JSON.stringify(n)),n})},[]),x=a.useCallback(()=>{!r.enabled||!r.dailyReminder||"serviceWorker"in navigator&&"PushManager"in window&&console.log("Reminder scheduled for",r.reminderTime)},[r]),m=a.useCallback((s,t)=>{i==="granted"&&new Notification(s,{body:t,icon:"/icon-192.png",badge:"/icon-192.png",tag:"lifebalance-reminder",renotify:!0})},[i]);return{permission:i,settings:r,isSupported:"Notification"in window,requestPermission:d,updateSettings:v,scheduleReminder:x,sendLocalNotification:m}}function W({isOpen:i,onClose:l,isDark:r,onToggleDark:c,userName:d,onUpdateName:v,onSignOut:x,isLoggedIn:m,isGuest:s}){const[t,n]=a.useState(!1),[f,j]=a.useState(d),[N,w]=a.useState(!1),{permission:p,settings:u,isSupported:k,requestPermission:C,updateSettings:S}=$(),y=()=>{f.trim()&&(v(f.trim()),n(!1))},M=async()=>{p==="granted"?S({enabled:!u.enabled}):await C()},A=async()=>{w(!0),await T()};return e.jsx(E,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"modal-overlay",onClick:l}),e.jsxs(o.div,{initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"spring",damping:28,stiffness:320},className:"fixed inset-x-0 bottom-0 z-50 bg-[var(--bg)] rounded-t-[28px] max-h-[85vh] overflow-y-auto border-t border-[var(--border)]",style:{boxShadow:"0 -10px 40px rgba(0,0,0,0.15)"},children:[e.jsx("div",{className:"flex justify-center pt-3 pb-1",children:e.jsx("div",{className:"w-9 h-1 bg-[var(--border-strong)] rounded-full"})}),e.jsxs("div",{className:"px-5 pb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"font-serif text-xl font-bold text-[var(--ink)]",children:"Param√®tres"}),e.jsx("button",{onClick:l,className:"w-9 h-9 rounded-xl bg-[var(--sand)] flex items-center justify-center hover:bg-[var(--input-bg)] transition-colors",children:e.jsx(I,{className:"w-4 h-4 text-[var(--ink-muted)]"})})]}),e.jsxs("div",{className:"px-5 pb-5 space-y-4",children:[s&&e.jsxs(o.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},className:"bg-[var(--card)] rounded-2xl p-5 border border-[var(--border)] shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-11 h-11 rounded-2xl bg-[var(--sand)] flex items-center justify-center",children:e.jsx(_,{className:"w-5 h-5 text-[var(--terra)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-serif font-bold text-[var(--ink)] text-[17px]",children:"Passer au mode complet"}),e.jsx("p",{className:"text-[13px] text-[var(--ink-muted)]",children:"Synchronisation cloud + coach IA"})]})]}),e.jsxs("div",{className:"space-y-2 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-[var(--sage)] flex items-center justify-center",children:e.jsx("span",{className:"text-[var(--bg)] text-xs font-bold",children:"‚úì"})}),e.jsx("span",{className:"text-sm text-[var(--ink)]",children:"Acc√®s sur tous tes appareils"})]}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-[var(--sage)] flex items-center justify-center",children:e.jsx("span",{className:"text-[var(--bg)] text-xs font-bold",children:"‚úì"})}),e.jsx("span",{className:"text-sm text-[var(--ink)]",children:"Sauvegarde automatique s√©curis√©e"})]}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-[var(--sage)] flex items-center justify-center",children:e.jsx("span",{className:"text-[var(--bg)] text-xs font-bold",children:"‚úì"})}),e.jsx("span",{className:"text-sm text-[var(--ink)]",children:"Conseils personnalis√©s par IA"})]})]}),e.jsx("button",{onClick:A,disabled:N,className:"w-full py-3.5 bg-[var(--sand)] hover:bg-[var(--input-bg)] text-[var(--ink)] font-semibold rounded-xl flex items-center justify-center gap-3 active:scale-[0.98] transition-all disabled:opacity-70 border border-[var(--border)]",children:N?e.jsx("div",{className:"w-5 h-5 border-2 border-[var(--ink-muted)] border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{children:"Continuer avec Google"})]})})]}),!s&&m&&e.jsxs("div",{className:"bg-[var(--card)] rounded-2xl p-4 flex items-center gap-3 border border-[var(--border)]",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-[var(--sand)] flex items-center justify-center",children:e.jsx(P,{className:"w-5 h-5 text-[var(--sage)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-[var(--ink)]",children:"Compte connect√©"}),e.jsx("p",{className:"text-xs text-[var(--ink-muted)]",children:"Donn√©es synchronis√©es automatiquement"})]}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[var(--sage)] animate-pulse"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-[11px] font-bold text-[var(--ink-muted)] uppercase tracking-wider px-1 mb-3",children:"Profil"})}),e.jsx("div",{className:"bg-[var(--card)] rounded-2xl p-4 border border-[var(--border)]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-[var(--terra)] flex items-center justify-center",children:e.jsx(B,{className:"w-5 h-5 text-[var(--bg)]"})}),e.jsxs("div",{children:[t?e.jsx("input",{type:"text",value:f,onChange:h=>j(h.target.value),onBlur:y,onKeyDown:h=>h.key==="Enter"&&y(),autoFocus:!0,className:"text-[17px] font-semibold text-[var(--ink)] bg-transparent border-b-2 border-[var(--terra)] focus:outline-none w-32"}):e.jsx("p",{className:"text-[17px] font-semibold text-[var(--ink)]",children:d}),e.jsx("p",{className:"text-[13px] text-[var(--ink-muted)]",children:s?"Mode invit√©":"Ton pr√©nom"})]})]}),!t&&e.jsx("button",{onClick:()=>{j(d),n(!0)},className:"text-[var(--terra)] text-sm font-semibold hover:opacity-70 transition-opacity px-3 py-1.5 rounded-lg bg-[var(--sand)]",children:"Modifier"})]})}),e.jsx("div",{className:"pt-3",children:e.jsx("p",{className:"text-[11px] font-bold text-[var(--ink-muted)] uppercase tracking-wider px-1 mb-3",children:"Pr√©f√©rences"})}),e.jsx("div",{className:"bg-[var(--card)] rounded-2xl p-4 border border-[var(--border)]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-[var(--sand)] flex items-center justify-center",children:e.jsx(L,{className:"w-5 h-5 text-[var(--ink)]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-[var(--ink)]",children:"Mode sombre"}),e.jsx("p",{className:"text-[13px] text-[var(--ink-muted)]",children:"R√©duire la fatigue oculaire"})]})]}),e.jsx("button",{onClick:c,className:`w-14 h-8 rounded-full transition-all relative ${r?"bg-[var(--terra)]":"bg-[var(--border-strong)]"}`,children:e.jsx(o.div,{animate:{x:r?26:4},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-1 w-6 h-6 bg-[var(--card)] rounded-full shadow-md"})})]})}),k&&e.jsx("div",{className:"bg-[var(--card)] rounded-2xl p-4 border border-[var(--border)]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-[var(--sand)] flex items-center justify-center",children:e.jsx(O,{className:"w-5 h-5 text-[var(--honey)]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-[var(--ink)]",children:"Rappels quotidiens"}),e.jsx("p",{className:"text-[13px] text-[var(--ink-muted)]",children:p==="granted"?"Notification √† 20h":"Activer les notifications"})]})]}),e.jsx("button",{onClick:M,className:`w-14 h-8 rounded-full transition-all relative ${u.enabled&&p==="granted"?"bg-[var(--honey)]":"bg-[var(--border-strong)]"}`,children:e.jsx(o.div,{animate:{x:u.enabled&&p==="granted"?26:4},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-1 w-6 h-6 bg-[var(--card)] rounded-full shadow-md"})})]})}),e.jsx("div",{className:"pt-3",children:e.jsx("p",{className:"text-[11px] font-bold text-[var(--ink-muted)] uppercase tracking-wider px-1 mb-3",children:"Confidentialit√©"})}),e.jsxs("div",{className:"bg-[var(--card)] rounded-2xl p-4 border border-[var(--border)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-[var(--sand)] flex items-center justify-center",children:e.jsx(R,{className:"w-5 h-5 text-[var(--sage)]"})}),e.jsx("p",{className:"font-semibold text-[var(--ink)]",children:"Vie priv√©e prot√©g√©e"})]}),e.jsxs("ul",{className:"space-y-3 pl-1",children:[e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-[var(--sage)] flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-[var(--bg)] text-[10px] font-bold",children:"‚úì"})}),e.jsx("span",{className:"text-[14px] text-[var(--ink-muted)]",children:s?"Donn√©es stock√©es localement":"Donn√©es chiffr√©es et s√©curis√©es"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-[var(--sage)] flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-[var(--bg)] text-[10px] font-bold",children:"‚úì"})}),e.jsx("span",{className:"text-[14px] text-[var(--ink-muted)]",children:"Aucun partage avec des tiers"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-[var(--sage)] flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-[var(--bg)] text-[10px] font-bold",children:"‚úì"})}),e.jsx("span",{className:"text-[14px] text-[var(--ink-muted)]",children:"Conversations 100% confidentielles"})]})]})]}),(m||s)&&x&&e.jsxs("button",{onClick:x,className:"w-full flex items-center justify-between p-4 bg-[var(--card)] rounded-2xl text-[var(--terra)] hover:bg-[var(--sand)] transition-all border border-[var(--border)]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-[var(--sand)] flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-[var(--terra)]"})}),e.jsx("span",{className:"font-semibold",children:s?"Quitter le mode invit√©":"Se d√©connecter"})]}),e.jsx(q,{className:"w-5 h-5 opacity-50"})]}),e.jsx("p",{className:"text-center text-xs text-[var(--ink-faint)] pt-4 pb-2",children:"LifeBalance v1.0 ¬∑ Fait avec üß°"})]}),e.jsx("div",{className:"h-6",style:{paddingBottom:"env(safe-area-inset-bottom)"}})]})]})})}export{W as SettingsModal};
