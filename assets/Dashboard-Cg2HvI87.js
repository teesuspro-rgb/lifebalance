import{c as m,r as o,j as e,m as d,A as N,L as f}from"./index-BW7Tjty9.js";import{Z as k}from"./zap-Qm9apzL2.js";import{C as w}from"./chevron-right-ByLabY2Y.js";const C=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],M=m("award",C);const _=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],S=m("calendar",_);const $=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],B=m("frown",$);const L=[["path",{d:"M5 12h14",key:"1ays0h"}]],T=m("minus",L);const D=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],E=m("save",D);const W=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],X=m("smile",W);const I=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],V=m("trending-down",I);const A=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],P=m("trending-up",A),z=n=>n>=9?{emoji:"ðŸ¤©",label:"Incroyable",color:"#06B6D4"}:n>=7?{emoji:"ðŸ˜Š",label:"Bien",color:"var(--sage)"}:n>=5?{emoji:"ðŸ™‚",label:"Ã‡a va",color:"var(--honey)"}:n>=3?{emoji:"ðŸ˜•",label:"Bof",color:"var(--terra)"}:{emoji:"ðŸ˜«",label:"Difficile",color:"#E63946"},H=o.memo(function({todayMood:t,onAddMood:a}){const[s,r]=o.useState(5),[i,l]=o.useState(""),[x,u]=o.useState(!1);o.useEffect(()=>{t!==null&&(r(t),u(!0))},[t]);const c=z(s),v=()=>{a(s,i),u(!0)};return x?e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[var(--card)] rounded-[26px] p-5 border border-[var(--border)] flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl border-2 border-[var(--card)] shadow-sm",style:{backgroundColor:c.color},children:c.emoji}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[16px] font-bold text-[var(--ink)]",children:"Humeur notÃ©e"}),e.jsxs("p",{className:"text-[13px] font-medium text-[var(--ink-muted)]",children:[c.label," (",s,"/10)"]})]})]}),e.jsx("button",{onClick:()=>u(!1),className:"text-[12px] font-bold text-[var(--ink-muted)] bg-[var(--sand)] px-3 py-1.5 rounded-full",children:"Modifier"})]}):e.jsxs("div",{className:"bg-[var(--card)] rounded-[26px] p-6 border border-[var(--border)]",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-[18px] font-serif font-bold text-[var(--ink)] mb-4",children:"Comment te sens-tu ?"}),e.jsx("div",{className:"relative inline-flex items-center justify-center h-20 w-20",children:e.jsx(N,{mode:"wait",children:e.jsx(d.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},transition:{duration:.15},className:"text-6xl absolute select-none",children:c.emoji},s)})}),e.jsx("p",{className:"mt-2 text-[16px] font-bold transition-colors duration-200",style:{color:c.color},children:c.label})]}),e.jsxs("div",{className:"relative h-12 mb-6 flex items-center select-none touch-none",children:[e.jsx("div",{className:"absolute w-full h-3 bg-[var(--sand)] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-75 ease-linear will-change-[width]",style:{width:`${s/10*100}%`,backgroundColor:c.color}})}),e.jsx("input",{type:"range",min:"1",max:"10",step:"1",value:s,onChange:h=>r(parseInt(h.target.value)),className:"absolute w-full h-full opacity-0 cursor-pointer z-20"}),e.jsx("div",{className:"absolute h-8 w-8 bg-[var(--card)] rounded-full shadow-md flex items-center justify-center pointer-events-none z-10 border-[2px] transition-all duration-75 ease-linear will-change-[left]",style:{left:`calc(${(s-1)/9*100}% - 16px)`,borderColor:c.color},children:e.jsx("span",{className:"text-[11px] font-bold text-[var(--ink)]",children:s})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:i,onChange:h=>l(h.target.value),placeholder:"Un mot sur ta journÃ©e...",rows:1,className:"w-full bg-[var(--input-bg)] rounded-[18px] py-3 px-4 text-[15px] text-[var(--ink)] resize-none border-none focus:ring-1 focus:ring-[var(--border)]"}),e.jsxs(d.button,{whileTap:{scale:.98},onClick:v,className:"w-full py-3.5 text-white font-bold rounded-[18px] flex items-center justify-center gap-2 shadow-sm transition-colors",style:{backgroundColor:c.color},children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[15px]",children:"Enregistrer"})]})]})]})}),F=n=>n<=3?"var(--terra)":n<=6?"var(--honey)":"var(--sage)",b={hidden:{},visible:{transition:{staggerChildren:.03}}},p={hidden:{opacity:0,y:8},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:500,damping:35}}},j=o.memo(function({icon:t,iconBgClass:a,iconColorClass:s,label:r,value:i,suffix:l,subtext:x}){return e.jsxs(d.div,{variants:p,className:"bg-[var(--card)] rounded-[24px] p-4 border border-[var(--border)]",style:{contain:"layout style paint"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${a}`,children:e.jsx(t,{className:`w-4 h-4 ${s}`,strokeWidth:2.5})}),e.jsx("span",{className:"text-[11px] font-bold text-[var(--ink-muted)] uppercase tracking-wider",children:r})]}),e.jsxs("div",{className:"flex items-baseline gap-1 mt-1",children:[e.jsx("p",{className:"text-2xl font-serif font-bold text-[var(--ink)] tabular-nums",children:i}),l&&e.jsx("span",{className:"text-xs font-bold text-[var(--ink-muted)]",children:l})]}),x&&e.jsx("div",{className:"text-[11px] font-medium text-[var(--ink-muted)] mt-0.5",children:x})]})}),O=o.memo(function({mood:t,dayName:a,isToday:s}){const r=t?t/10*100:6,i=t?F(t):"var(--border)";return e.jsxs("div",{className:"flex-1 flex flex-col items-center h-28",children:[e.jsx("div",{className:"relative w-full max-w-[22px] flex-1 flex items-end rounded-full bg-[var(--sand)]/30 overflow-hidden",children:e.jsx("div",{className:"w-full rounded-t-full transition-all duration-300 ease-out",style:{height:`${r}%`,backgroundColor:i,opacity:t?1:.4}})}),e.jsx("span",{className:`mt-1.5 text-[10px] font-bold uppercase ${s?"text-[var(--ink)]":"text-[var(--ink-muted)]"}`,children:a[0]}),s&&e.jsx("div",{className:"w-1 h-1 rounded-full bg-[var(--terra)] mt-0.5"})]})},(n,t)=>n.mood===t.mood&&n.isToday===t.isToday),R=o.memo(function({weekMoods:t,averageMood:a,moodTrend:s}){const r=s==="up"?P:s==="down"?V:T,i=s==="up"?"text-[var(--sage)]":s==="down"?"text-[var(--terra)]":"text-[var(--ink-muted)]";return e.jsxs(d.section,{variants:p,className:"bg-[var(--card)] rounded-[26px] p-5 border border-[var(--border)]",style:{contain:"layout style"},children:[e.jsxs("header",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-[14px] bg-[var(--sand)] border border-[var(--border)] flex items-center justify-center",children:e.jsx(S,{className:"w-5 h-5 text-[var(--ink)]",strokeWidth:2})}),e.jsx("h2",{className:"font-serif font-bold text-[var(--ink)] text-lg",children:"Ta semaine"})]}),a!==null&&e.jsxs("div",{className:"flex items-center gap-1.5 bg-[var(--bg)] px-3 py-1.5 rounded-full border border-[var(--border)]",children:[e.jsxs("span",{className:"text-sm font-bold tabular-nums",children:[a,"/10"]}),e.jsx(r,{className:`w-4 h-4 ${i}`})]})]}),e.jsx("div",{className:"flex justify-between gap-1.5",children:t.map(l=>e.jsx(O,{mood:l.mood,dayName:l.dayName,isToday:l.isToday},l.date))})]})}),U=o.memo(function({achievementCount:t,achievementIcons:a,onOpenBadges:s}){return e.jsxs(d.button,{variants:p,onClick:s,className:"w-full bg-[var(--card)] rounded-[26px] p-5 border border-[var(--border)] text-left active:scale-[0.98] transition-transform",style:{contain:"layout style",WebkitTapHighlightColor:"transparent"},children:[e.jsxs("header",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-[14px] bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"ðŸ†"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif font-bold text-[var(--ink)] text-lg",children:"SuccÃ¨s"}),e.jsxs("span",{className:"text-xs font-bold text-[var(--ink-muted)]",children:[t," badges"]})]})]}),e.jsx(w,{className:"w-5 h-5 text-[var(--ink-muted)]"})]}),e.jsxs("div",{className:"flex gap-2",children:[a.map((r,i)=>e.jsx("div",{className:"w-10 h-10 bg-[var(--bg)] rounded-xl flex items-center justify-center border border-[var(--border)] text-lg",children:r},i)),t>6&&e.jsxs("div",{className:"w-10 h-10 bg-[var(--sand)] rounded-xl flex items-center justify-center text-xs font-bold text-[var(--ink-muted)]",children:["+",t-6]}),t===0&&e.jsx("span",{className:"text-sm text-[var(--ink-muted)] italic",children:"Ã€ toi de jouer !"})]})]})}),Z=o.memo(function({xp:t}){const a=o.useMemo(()=>{const s=f.reduce((l,x)=>t>=x.minXp?x:l,f[0]),r=f.find(l=>l.minXp>t),i=r?(t-s.minXp)/(r.minXp-s.minXp)*100:100;return{currentLevel:s,nextLevel:r,xpProgress:i}},[t]);return e.jsxs(d.div,{variants:p,className:"col-span-2 bg-[var(--card)] rounded-[26px] p-4 border border-[var(--border)] flex items-center justify-between gap-4",style:{contain:"layout style"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-[14px] bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(M,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-[10px] font-bold text-[var(--ink-muted)] uppercase block",children:["Niveau ",a.currentLevel.level]}),e.jsx("span",{className:"text-[var(--ink)] font-serif font-bold text-lg leading-none",children:a.currentLevel.name})]})]}),e.jsxs("div",{className:"flex-1 max-w-[120px] flex flex-col items-end",children:[e.jsxs("span",{className:"text-[10px] font-bold text-[var(--ink-muted)] mb-1",children:[t," / ",a.nextLevel?.minXp||"Max"," XP"]}),e.jsx("div",{className:"w-full h-2 bg-[var(--sand)] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full transition-all duration-500",style:{width:`${a.xpProgress}%`}})})]})]})}),q=o.memo(function({positiveCount:t,negativeCount:a}){const s=a>0?t/a:t,r=s>=1||t>0&&a===0;return e.jsx(j,{icon:r?X:B,iconBgClass:r?"bg-[var(--sage)]/20":"bg-[var(--terra)]/20",iconColorClass:r?"text-[var(--sage)]":"text-[var(--terra)]",label:"Bilan",value:a>0?s.toFixed(1):t,subtext:e.jsxs("span",{className:"flex gap-2 text-[10px]",children:[e.jsxs("span",{className:"text-[var(--sage)] font-bold",children:["+",t]}),e.jsxs("span",{className:"text-[var(--terra)] font-bold",children:["-",a]})]})})}),Q=o.memo(function({positiveCount:t,negativeCount:a,achievements:s,xp:r,streak:i,todayMood:l,weekMoods:x,averageMood:u,moodTrend:c,onAddMood:v,onOpenBadges:h}){const y=o.useMemo(()=>s.slice(0,6).map(g=>g.icon),[s]);return e.jsxs(d.div,{className:"px-4 py-2 space-y-4 max-w-lg mx-auto",style:{contain:"content",paddingBottom:"calc(env(safe-area-inset-bottom, 0px) + 120px)"},variants:b,initial:"hidden",animate:"visible",children:[e.jsx(d.div,{variants:p,children:e.jsx(H,{todayMood:l,onAddMood:v})}),e.jsxs(d.div,{variants:b,className:"grid grid-cols-2 gap-3",children:[e.jsx(j,{icon:k,iconBgClass:"bg-amber-100 dark:bg-amber-900/30",iconColorClass:"text-amber-600 dark:text-amber-400 fill-current",label:"SÃ©rie",value:i,suffix:"j"}),e.jsx(q,{positiveCount:t,negativeCount:a}),e.jsx(Z,{xp:r})]}),e.jsx(R,{weekMoods:x,averageMood:u,moodTrend:c}),e.jsx(U,{achievementCount:s.length,achievementIcons:y,onOpenBadges:h})]})});export{Q as Dashboard,Q as default};
